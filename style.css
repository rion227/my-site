html, body{
  height:100%;
  margin:0;
  background:#fff;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
}

.stage{
  min-height:100dvh;
  display:grid;
  place-items:center;
  padding:12px;
  box-sizing:border-box;
}

.card-wrap{
  position:relative;
  display:inline-block;

  /* JSが「表示中の画像サイズ(px)」をここに入れる（追従の要） */
  --card-w: 300px;
  --card-h: 500px;

  /* 顔写真範囲（画像サイズに対する割合）※ズレたらここだけ調整 */
  --photo-left: 0.179;
  --photo-top:  0.060;
  --photo-w:    0.625;
  --photo-h:    0.345;
}

.card{
  display:block;
  max-width: calc(100vw - 24px);
  max-height: calc(100dvh - 24px);
  width:auto;
  height:auto;
}

/* ========= 時刻（画像に追従） ========= */
#clock{
  position:absolute;
  left:50%;
  transform:translateX(-50%);

  /* 位置：画像の高さに対して下から何% */
  bottom: calc(var(--card-h) * 0.012);

  color: rgba(255,255,255,0.92);

  /* サイズ：画像の幅に比例（スマホの拡大率などで暴れにくい） */
  font-size: calc(var(--card-w) * 0.036);

  font-weight: 300;
  letter-spacing: 0.4px;
  text-shadow: none;
  pointer-events:none;
  white-space:nowrap;
}

/* PCだけほんの少し詰める */
@media (min-width: 900px){
  #clock{ letter-spacing: 0.2px; }
}

/* 点滅（必要ならJSで class を付ける） */
#clock.is-blinking{
  animation: clockBlink 0.9s ease-in-out;
}
@keyframes clockBlink{
  0%, 100% { opacity: 1; }
  30% { opacity: 0.45; }
}

/* ========= 顔写真だけ「キラーン」 ========= */
.photo-shine{
  position:absolute;
  left:   calc(var(--card-w) * var(--photo-left));
  top:    calc(var(--card-h) * var(--photo-top));
  width:  calc(var(--card-w) * var(--photo-w));
  height: calc(var(--card-h) * var(--photo-h));

  overflow:hidden;
  pointer-events:none;
  border-radius: 0; /* 角丸にしたければ数値入れる */
}

/* デバッグ：範囲が分かる赤枠（すぐ消せる） */
.photo-shine.debug{
  outline: 2px solid red;
  outline-offset: -2px;
}

.photo-shine::before{
  content:"";
  position:absolute;
  top:-40%;
  left:-80%;
  width:72%;
  height:200%;
  transform: rotate(25deg);
  opacity:0;

  /* 少し濃く */
  background: linear-gradient(
    to right,
    rgba(255,255,255,0.00) 0%,
    rgba(255,255,255,0.28) 25%,
    rgba(255,255,255,0.78) 50%,
    rgba(255,255,255,0.28) 75%,
    rgba(255,255,255,0.00) 100%
  );

  /* 2秒に1回、そのうち約1.3秒で流す */
  animation: shineCycle 2s linear infinite;
}

@keyframes shineCycle{
  /* 0%→65%（約1.3秒）で流れる */
  0%   { transform: translateX(-140%) rotate(25deg); opacity:0; }
  6%   { opacity:0.62; }
  65%  { transform: translateX(240%) rotate(25deg); opacity:0.62; }

  /* 残りは消えて待機 */
  66%  { opacity:0; }
  100% { transform: translateX(240%) rotate(25deg); opacity:0; }
}

/* ========= 画像ロード失敗デバッグ ========= */
.img-error{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  background:rgba(0,0,0,0.7);
  color:#fff;
  padding:10px 12px;
  border-radius:8px;
  font-size:12px;
  max-width:90%;
  word-break:break-all;
}
